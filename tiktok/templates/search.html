{% extends "layout.html" %}
{% load static %}
{% block  content%}
    
<div class="flex justify-between mx-auto w-full lg:px-2.5 px-0 max-w-[1140px]">

 <!-- sidebar -->
<div
 id="SideNavMain"
 class="fixed z-20 bg-white pt-[70px] h-full lg:border-r-0 border-r w-[150px] overflow-auto hidden md:flex"
>
 <div class="lg:w-full w-[55px]">
   <div
     class="w-full flex items-center hover:bg-gray-100 p-2.5 rounded-md"
   >
     <div class="flex items-center lg:mx-0 mx-auto">
       <img
         src="{% static 'public/assets/images/accueil.png' %}"
         class="w-[25px] h-[25px]"
         alt=""
       />

       <p
         class="lg:block hidden pl-[9px] mt-0.5 font-semibold text-[17px] text-[${colorString}]"
       >
         <span class="text-[#F02C56]">For You</span>
       </p>
     </div>
   </div>
   <div
     class="w-full flex items-center hover:bg-gray-100 p-2.5 rounded-md"
   >
     <div class="flex items-center lg:mx-0 mx-auto">
       <img
         src="{% static 'public/assets/images/add-friend.png' %}"
         class="w-[25px] h-[25px]"
         alt=""
       />

       <p
         class="lg:block hidden pl-[9px] mt-0.5 font-semibold text-[17px] text-[${colorString}]"
       >
         <span>Following</span>
       </p>
     </div>
   </div>
   <div
     class="w-full flex items-center hover:bg-gray-100 p-2.5 rounded-md"
   >
     <div class="flex items-center lg:mx-0 mx-auto">
       <img
         src="{% static 'public/assets/images/compass.png' %}"
         class="w-[25px] h-[25px]"
         alt=""
       />

       <p
         class="lg:block hidden pl-[9px] mt-0.5 font-semibold text-[17px] text-[${colorString}]"
       >
         <span>Explore</span>
       </p>
     </div>
   </div>
   <div
     class="w-full flex items-center hover:bg-gray-100 p-2.5 rounded-md"
   >
     <div class="flex items-center lg:mx-0 mx-auto">
       <img
         src="{% static 'public/assets/images/video_call.png' %}"
         class="w-[25px] h-[25px]"
         alt=""
       />

       <p
         class="lg:block hidden pl-[9px] mt-0.5 font-semibold text-[17px] text-[${colorString}]"
       >
         <span>LIVE</span>
       </p>
     </div>
   </div>
   <div
     class="w-full flex items-center hover:bg-gray-100 p-2.5 rounded-md"
   >
     <div class="flex items-center lg:mx-0 mx-auto">
      {% if user.is_authenticated %}
 
       {% if user.profile.picture %}
       <img
             class="w-[25px] h-[25px] rounded-full"
             src="{{user.profile.picture.url }}"
       /> 
       {% else %}
         <img
             class="w-[25px] h-[25px] rounded-full"
             src="{% static 'public/assets/images/placeholder-user.jpg' %}"
       />
       {% endif %}
       <p
         class="lg:block hidden pl-[9px] mt-0.5 font-semibold text-[17px] text-[${colorString}]"
       >
         <span>Profile</span>
       </p>
       {% endif %}
     </div>
   </div>

   <div class="border-b lg:ml-2 mt-2"></div>
   <h3
     class="lg:block hidden text-xs text-gray-600 font-semibold pt-4 pb-2 px-2"
   >
     Suggested accounts
   </h3>

   <div class="lg:hidden block pt-3"></div>
   {% if user.is_authenticated %}
   {% for user in all_users %}
   {% if request.user.username != user.username %}
   <div class="cursor-pointer">
     <a
       href="{% url 'profile' user %}"
       class="flex items-center hover:bg-gray-100 rounded-md w-full py-1.5 px-2"
     >
     {% if user.profile.picture %}
       <img
         class="rounded-full lg:mx-0 mx-auto"
         width="35"
         src="{{user.profile.picture.url }}"
       />
       {% else %}
       <img
       class="rounded-full lg:mx-0 mx-auto"
       width="35"
       src="{% static 'public/assets/images/placeholder-user.jpg' %}"
     />
       {% endif %}
       <div class="lg:pl-2.5 lg:block hidden">
         <div class="flex items-center">
           <p class="font-bold text-[14px] truncate">{{user.username}}</p>
           <p class="ml-1 rounded-full bg-[#58D5EC] h-[14px] relative">
             <img
               src="{% static 'public/assets/images/check.png' %}"
               width="15px"
               height="15px"
               alt=""
             />
             <AiOutlineCheck
               class="relative p-[3px]"
               color="#FFFFFF"
               size="15"
             />
           </p>
         </div>

         <p class="font-light text-[12px] text-gray-600">{{user.username}}</p>
       </div>
     </a>
   </div>
  
   {% endif %}
   {% endfor %}
   <button
   class="lg:block hidden text-[#F02C56] pt-1.5 pl-2 text-[13px]"
 >
   See all
 </button>
   {% else %}


   <a href="{% url "login" %}">
   <button
    class="lg:block hidden text-[#F02C56] pt-1.5 pl-2 text-[13px]"
    >
    LOGIN
    </button>
    </a>
    {% endif %}


  

   <div class="lg:block hidden border-b lg:ml-2 mt-2"></div>

   <div class="lg:block hidden text-[11px] text-gray-500">
     <p class="pt-4 px-2">
       About Newsroom TikTok Shop Contact Careers ByteDance
     </p>
     <p class="pt-4 px-2">
       TikTok for Good Advertise Developers Transparency TikTok Rewards
       TikTok Browse TikTok Embeds
     </p>
     <p class="pt-4 px-2">
       Help Safety Terms Privacy Creator Portal Community Guidelines
     </p>
     <p class="pt-4 px-2">Â© 2023 TikTok</p>
   </div>

   <div class="pb-14"></div>
 </div>
</div>

<!-- endsidebar -->





<div class="pt-[90px] profile 2xl:pl-[185px] lg:pl-[160px] lg:pr-0 w-[calc(100%-90px)] pr-3 max-w-[1800px] 2xl:mx-auto">

<div class="">

    <ul class="w-full flex items-center pt-4 border-b">
        <li class="w-60 text-center py-2 text-[17px] font-semibold border-b-2 border-b-black">Top</li>
        <li class="w-60 text-gray-500 text-center py-2 text-[17px] font-semibold">Users</li>
        <li class="w-60 text-gray-500 text-center py-2 text-[17px] font-semibold">Videos</li>
        <li class="w-60 text-gray-500 text-center py-2 text-[17px] font-semibold">Live</li>
    </ul>
  

   <div class="flex items-center justify-between my-2">
     <h3 class="font-bold text-[20px] text-gray-700">Accounts</h3>
     <h3 class="font-bold text-[20px] text-gray-700">See more</h3>
   </div>

   {% if profiles %}
   <div class="overflow-y-auto flex  gap-8 flex-col my-4">
    {% for profile in profiles|slice:":5" %}
      <div class="flex items-center gap-6">
        <a href="{% url 'profile' profile.user.username %}">
            {% if profile.picture %}
            <img src="{{ profile.picture.url }}" width="60" height="60" class="rounded-full" alt=""/>
          {% else %}
            <img
            width="60" height="60" class="rounded-full"
            src="{% static 'public/assets/images/placeholder-user.jpg' %}"
          />
          {% endif %}
        </a>

        <div>
            <span class="font-bold text-[19px]">{{ profile.first_name }} {{ profile.last_name }}</span>
            <div class="flex gap-2">
                <p>{{ profile.user.username }}</p> 
                <p><strong>{{following_count}}</strong> Following
                </p>
            </div>
           
        </div>

      </div>
     {% endfor %}
    
           
    </div>
        

    <div class="my-8">
        <h3 class="font-bold text-[20px] text-gray-700">Videos</h3>
            <div class="mt-4 grid 2xl:grid-cols-6 xl:grid-cols-3 lg:grid-cols-3 md:grid-cols-3 grid-cols-2 gap-3">
                {% for post in posts %}
                <div class="relative brightness-90 hover:brightness-[1.1] cursor-pointer">
                
                    <a href="{% url 'postdetails' post.id %}">                            
                        <video 
                                autoplay
                                muted
                                loop
                                class="aspect-[3/4] object-cover rounded-md" 
                                src="{{ post.video.url }}"  />
                        </a>
                
                    <div class="px-1">
                        <p class="text-gray-700 text-[15px] pt-1 break-words">
                          {{post.caption}}
                        </p>
                        <div class="flex items-center gap-1 -ml-1 text-gray-600 font-bold text-xs">
                            <SiSoundcharts size="15"/>
                            3%
                            <BiErrorCircle  size="16"/>
                        </div>
                    </div>
                </div>
                {% endfor %}
           
            </div>

    </div>

   </div>
   {% else %}
   <p>No users found.</p>
   {% endif %}

</div>
</div>


</div>


</div>

{% endblock %}